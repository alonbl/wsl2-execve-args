#include <direct.h>
#include <errno.h>
#include <process.h>
#include <stdio.h>
#include <windows.h>
int main(int argc, char *argv[], char *envp[]) {
	char * x = "\\\\wsl.localhost\\Ubuntu-22.04\\tmp\\dump-args-win.exe";
	const char *args[] = { x, NULL };
	int rval;
	char buf[1024];
	char **p;
	printf("Env:\n");
	for (p=envp; *p!=NULL; p++) {
		printf("\t%s\n", *p);
	}
	_chdir("C:\\Temp");
	GetCurrentDirectoryA(sizeof(buf), buf);
	printf("cwd: %s\n", buf);
	printf("prog: %s\n", x);
        rval = (int) _spawnv (_P_WAIT, x, args);
	printf("ret=%d errno=%d\n", rval, errno);
	return 0;
}
