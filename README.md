# WSL2 Reproduction of execve argv[0] override

## Issue

https://github.com/microsoft/WSL/issues/8162

## Reproduction

```sh
$ make deps
$ make check
```

```
Native test
./exec-args dump-args | tee dump-args.out
CWD: '/home/alonbl/tmp/wsl2-args'
argv[0]='arg0'
argv[1]='arg1'
argv[2]='arg2'
PASS
Windows test
./exec-args dump-args-win.exe | tee dump-args-win.out
CWD: '\\wsl.localhost\Ubuntu\home\alonbl\tmp\wsl2-args'
argv[0]='dump-args-win.exe'
argv[1]='arg1'
argv[2]='arg2'
FAILED
make: *** [Makefile:31: check] Error 1
```

Notice that `argv[0]` is not preserved when executing Windows executable.

When using `strace` we can show the interaction with the `interop` service, and confirm that the `argv[0]` override happens at the `Linux`.
There is no place for both executable name and `argv[0]` in the protocol.


```
connect(4, {sa_family=AF_UNIX, sun_path="/run/WSL/721_interop"}, 110) = 0
write(4, "\6\0\0\0\360\0\0\0\352\10s\241\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\09\0\0\0\203\0\0\0\304\0\0\0\3\0\0\0\273\0\0\0\0\0\0\0\0\\\\wsl.localhost\\Ubuntu\\home\\alonbl\\tmp\\wsl2-execve-args\\dump-args-win.exe\0\\\\wsl.localhost\\Ubuntu\\home\\alonbl\\tmp\\wsl2-execve-args\0WSLENV=\0\0dump-args-win.exe\0arg1\0arg2\0", 240) = 240
```
